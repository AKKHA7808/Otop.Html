{% extends "base.html" %}
{% block title %}สินค้า OTOP จังหวัด{{ province.name }}{% endblock %}

{% block extra_css %}
<style>
  #otopTable th, #otopTable td { vertical-align: middle; }
</style>
{% endblock %}

{% block content %}
<h2 class="mb-4">สินค้า OTOP จังหวัด{{ province.name }}</h2>
<a href="{% url 'province_list' %}" class="btn btn-outline-secondary mb-3"><i class="bi bi-arrow-left"></i> กลับไปหน้ารายชื่อจังหวัด</a>
<div class="table-responsive">
  <table id="otopTable" class="table table-striped table-bordered align-middle">
    <thead class="table-secondary">
      <tr>
        <th>ชื่อสินค้า</th>
        <th>หมวดหมู่</th>
        <th>เรตติ้ง <i class="bi bi-star-fill text-warning"></i></th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr>
        <td>{{ product.name }}</td>
        <td>{{ product.category }}</td>
        <td>{{ product.rating|floatformat:1 }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="3" class="text-center text-muted">ยังไม่มีข้อมูลสินค้าในจังหวัดนี้</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (window.jQuery && $('#otopTable').length) {
      $('#otopTable').DataTable({
        language: {
          url: '//cdn.datatables.net/plug-ins/1.13.10/i18n/th.json'
        }
      });
    }
  });
</script>
{% endblock %}
